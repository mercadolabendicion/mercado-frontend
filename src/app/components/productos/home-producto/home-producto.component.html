<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="rojo">
        Gestion de Productos
      </h1>
    </div>
    <div class="col-8 col-sm-8 col-md-9 col-lg-10 col-xl-10 col-xxl-10">
      <div class="buscar">
        <input type="text" id="buscar" (keyup)="buscar($event)" placeholder="  Escanear o escribir c√≥digo">
      </div>
    </div>
    <div class="col-4 col-sm-4 col-md-3 col-lg-2 col-xl-2 col-xxl-2">
      <button id="nuevo" class="btn btn-primary" routerLink="/app/producto/nuevo">Nuevo</button>
    </div>
  </div>

  <h6 class="totalProductos">Se han encontrado {{ totalProductos }} productos.</h6>

  <div class="table-container">
    <div class="separador">
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>C√≥digo</th>
              <th>Nombre</th>
              <th class="d-none d-md-table-cell">FechaCreacion</th>
              <th class="eliminar">Acciones</th>
            </tr>
          </thead>


          <tbody>
            <!-- <tr *ngFor="let persona of personas"> -->
            <tr *ngFor="let producto of filtroProductos; let i=index">
              <td>{{ producto.codigo }}</td>
              <td>{{ producto.nombre }}</td>
              <td class="d-none d-md-table-cell">{{ producto.fechaCreacion | date }}</td>
              <td class="eliminar">
                <button class="editar" (click)="abrirModal(producto.codigo)">üëÅÔ∏è</button>
                <button class="editar red-x" (click)="eliminarProductoCodigo(producto.codigo)">x</button>
                <button class="editar" (click)="toggleModoEdicion(producto)">‚úèÔ∏è</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="pup-up" [ngClass]="{ 'oculto': modoOculto }">
      <div class="pop-up-container">
        <span class="cerrar" (click)="editarModoOcuto()">‚ùå</span>
        <app-editar-producto class="editar" [productosEditar]="productosEditar"
          (modoOculto)="editarModoOcuto()"></app-editar-producto>

      </div>
    </div>

  </div>
  <div class="modal" [ngClass]="{ 'show': modalAbierto }" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Detalles del Producto</h5>
          <button type="button" class="close" (click)="cerrarModal()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p><strong>C√≥digo:</strong> {{ productoSeleccionado?.codigo }}</p>
          <p><strong>Nombre:</strong> {{ productoSeleccionado?.nombre }}</p>
          <p><strong>Activo:</strong> {{ productoSeleccionado?.activo ? 'S√≠' : 'No' }}</p>
          <p><strong>Fecha de Creaci√≥n:</strong> {{ productoSeleccionado?.fechaCreacion | date }}</p>
          <h6>Formas de Venta:</h6>
          <ul>
            <li *ngFor="let forma of productoSeleccionado?.formaVentas">
              <strong>Nombre:</strong> {{ forma.nombre }} <br>
              <strong>Precio de compra:</strong> {{ forma.precioCompra | currency }} <br>
              <strong>Precio de venta:</strong> {{ forma.precioVenta | currency }} <br>
              <strong>Cantidad:</strong> {{ forma.cantidad }}
            </li>
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="cerrarModal()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="d-flex justify-content-center align-items-center mt-3 flex-wrap" *ngIf="modoOculto">
    <nav aria-label="Page navigation" class="w-100">
      <ul class="pagination justify-content-center mt-3 flex-wrap">
        <!-- P√°gina anterior -->
        <li class="page-item" [class.disabled]="paginaActual === 0">
          <button class="page-link" (click)="paginaAnterior()" tabindex="-1" aria-disabled="true">
            Anterior
          </button>
        </li>
  
        <!-- Mostrar las p√°ginas -->
        <li class="page-item" *ngFor="let page of paginas; let i = index" [class.active]="paginaActual === i">
          <button class="page-link" (click)="irPagina(i)">{{ i + 1 }}</button>
        </li>
  
        <!-- P√°gina siguiente -->
        <li class="page-item" [class.disabled]="paginaActual === totalPaginas - 1">
          <button class="page-link" (click)="paginaSiguiente()">Siguiente</button>
        </li>
      </ul>
    </nav>
  </div>

