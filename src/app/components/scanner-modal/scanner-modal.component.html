<div class="scanner-wrapper">
  <!-- Header -->
  <div class="scanner-header">
    <h5>Escanear de código de barras</h5>
    <button type="button" class="btn-close" (click)="closeScanner()" aria-label="Cerrar"></button>
  </div>

  <!-- Scanner Container -->
  <div class="scanner-body">
    <!-- Mensaje de carga -->
    <div *ngIf="isLoading" class="loading-overlay">
      <div class="spinner-border text-light" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="text-light mt-3">Iniciando cámara...</p>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="errorMessage && !isLoading" class="error-overlay">
      <div class="alert alert-danger m-3" role="alert">
        <i class="fa-solid fa-exclamation-triangle me-2"></i>
        {{ errorMessage }}
      </div>
      <button class="btn btn-light mt-2" (click)="closeScanner()">Cerrar</button>
    </div>

    <!-- Contenedor donde Quagga monta video y canvas -->
    <div #scannerContainer id="scanner-container" class="scanner-container"></div>

    <!-- Overlay de guía -->
    <div class="scan-guide" *ngIf="!isLoading && !errorMessage">
      <div class="scan-frame">
        <div class="scan-line"></div>
      </div>
      <p class="scan-instruction">Coloca el código de barras aquí</p>
    </div>
  </div>

  <!-- Footer -->
  <div class="scanner-footer" *ngIf="!errorMessage">
    <p class="mb-0">
      <i class="fa-solid fa-lightbulb me-2"></i>
      Buena iluminación y mantén el dispositivo firme
    </p>
  </div>
</div>
